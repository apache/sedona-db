---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# sedonadb

<!-- badges: start -->
<!-- badges: end -->

The goal of sedonadb is to provide an R interface to [Apache SedonaDB](https://sedona.apache.org/sedonadb). SedonaDB provides a [DataFusion](https://datafusion.apache.org)-powered single-node engine with a wide range of spatial capabilities built in, including spatial SQL with high function coverage and GeoParquet IO.

## Installation

You can install the development version of sedonadb from [GitHub](https://github.com/) with:

``` r
# install.packages("pak")
pak::pak("paleolimbot/sedonadb")
```

Installing a development version of sedonadb requires a [Rust compiler](https://rustup.rs) and PROJ/GEOS system dependencies. Install instructions for these dependencies on various platforms can be found on the [sf package homepage](https://r-spatial.github.io/sf).

## Example

This is a basic example which shows you how to solve a common problem:

```{r example}
library(sedonadb)

url <- "https://github.com/geoarrow/geoarrow-data/releases/download/v0.2.0/microsoft-buildings_point_geo.parquet"

sd_read_parquet(url) |> sd_to_view("buildings", overwrite = TRUE)
sd_sql("SELECT * FROM buildings") |> sd_preview(5)
```

```{r}
library(sf)

nc <- sf::read_sf(system.file("shape/nc.shp", package = "sf"))
nc |> sd_to_view("nc", overwrite = TRUE)

sd_sql("SELECT * FROM nc")
```

